"use strict";function getCheckoutSidebar(){var e=JSON.parse(localStorage.getItem("user")),t=JSON.parse(localStorage.getItem("checkout"));$("#checkout-avatar").attr("src","http://via.placeholder.com/250x250"),$("#checkout-avatar").attr("data-demo-src",t.avatar),"development"===env&&changeDemoImages(),$("#checkout-username").html(t.username),e.addresses[1].disabled?($("#shipping-address1").html(e.addresses[0].address1),$("#shipping-address2").html(e.addresses[0].address2),$("#shipping-city").html(e.addresses[0].city),$("#shipping-state").html(e.addresses[0].state),$("#shipping-postalCode").html(e.addresses[0].postalCode),$("#shipping-country").html(e.addresses[0].country)):($("#shipping-address1").html(e.addresses[1].address1),$("#shipping-address2").html(e.addresses[1].address2),$("#shipping-city").html(e.addresses[1].city),$("#shipping-state").html(e.addresses[1].state),$("#shipping-postalCode").html(e.addresses[1].postalCode),$("#shipping-country").html(e.addresses[1].country)),$("#checkout-subtotal-value").html(parseFloat(t.subtotal).toFixed(2)),$("#checkout-shipping-value").html(parseFloat(t.shipping).toFixed(2)),$("#checkout-tax-value").html(parseFloat(t.taxes).toFixed(2)),$("#checkout-grandtotal-value").html(parseFloat(t.total).toFixed(2))}function getCheckoutStep1(){var e=JSON.parse(localStorage.getItem("checkout"));$(".flex-table .flex-table-item").remove();for(var t=0;t<e.items.length;t++){var a='\n      <div class="flex-table-item product-container" data-product-id="'.concat(e.items[t].id,'">\n          <div class="product">\n              <img src="http://via.placeholder.com/250x250" data-demo-src="').concat(e.items[t].images[0].url,'" alt="">\n              <a class="product-name">').concat(e.items[t].name,'</a>\n          </div>\n          <div class="quantity">\n              <span>').concat(e.items[t].quantity,'</span>\n          </div>\n          <div class="price">\n              <span class="has-price">').concat(e.items[t].price.toFixed(2),'</span>\n          </div>\n          <div class="discount">\n              <span class="has-price">0</span>\n          </div>\n          <div class="total">\n              <span class="has-price">').concat((e.items[t].price*e.items[t].quantity).toFixed(2),"</span>\n          </div>\n      </div>\n    ");$.when($(".flex-table").append(a)).done((function(){"development"===env&&changeDemoImages()}))}}function getCheckoutStep2(){!0===JSON.parse(localStorage.getItem("user")).addresses[1].disabled&&$("#shipping-switch").closest("label").addClass("is-vhidden")}function getCheckoutStep4(){var e=JSON.parse(localStorage.getItem("checkout"));$("#summary-shipping-icon").attr("src",e.shippingMethod.icon),$("#summary-shipping-name").html(e.shippingMethod.name),$("#summary-shipping-description").html(e.shippingMethod.description),$("#summary-payment-icon").attr("src",e.paymentMethod.icon),$("#summary-payment-name").html(e.paymentMethod.name),$("#summary-payment-description").html(e.paymentMethod.description)}function convertCheckoutToOrder(){var e=JSON.parse(localStorage.getItem("user")),t=JSON.parse(localStorage.getItem("checkout")),a=[];for(var s,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][(s=new Date).getMonth()]+" "+s.getDate()+" "+s.getFullYear(),i=0;i<t.items.length;i++){var c={id:t.items[i].id,name:t.items[i].name,price:t.items[i].price,quantity:t.items[i].quantity,photoUrl:t.items[i].images[0].url};a.push(c)}var n={id:parseInt(e.orders[0].id)+1,total:t.total,date:o,status:"New",completed:12,shippingMethod:t.shippingMethod.name,orderModel:{subtotal:parseFloat(t.subtotal).toFixed(2),taxes:parseFloat(t.taxes).toFixed(2),shipping:parseFloat(t.shipping).toFixed(2),total:parseFloat(t.total).toFixed(2)},products:a,contact:{name:"Janet Smith",photoUrl:"assets/img/avatars/janet.jpg"}};e.orders.unshift(n),localStorage.setItem("user",JSON.stringify(e)),localStorage.removeItem("checkout")}$((function(){if($(".shipping-methods-grid input").on("change",(function(){var e=$(this),t=JSON.parse(localStorage.getItem("checkout")),a=(parseFloat(e.closest(".method-card").attr("data-shipping-rate")).toFixed(2)*parseInt(t.count)).toFixed(2),s=(parseFloat(t.total)+parseFloat(a)).toFixed(2);$("#checkout-shipping-value").html(a),$("#checkout-grandtotal-value").html(s),$(".shipping-methods-grid .method-card").removeClass("is-selected"),e.closest(".method-card").addClass("is-selected")})),$("#payment-methods-main input").on("change",(function(){var e=$(this).attr("data-value-id");$(this).closest(".method-card").addClass("is-selected"),setTimeout((function(){$(".checkout-payment-methods").addClass("is-hidden"),$("#payment-methods-"+e).removeClass("is-hidden")}),300)})),$(".checkout-payment-methods .payment-back").on("click",(function(){$(".checkout-payment-methods").addClass("is-hidden"),$(".checkout-payment-methods .method-card").removeClass("is-selected"),$("#payment-methods-main").removeClass("is-hidden").find("input").prop("checked",!1),$(".payment-disclaimer .animated-checkbox.is-checked input").prop("checked",!1),$(".payment-disclaimer .animated-checkbox.is-checked .shadow-circle").removeClass("is-opaque"),$(".payment-disclaimer .animated-checkbox.is-checked").removeClass("is-checked is-unchecked"),$("#checkout-next").addClass("no-click")})),$(".payment-disclaimer input").on("change",(function(){$(this).prop("checked")?$("#checkout-next").removeClass("no-click"):$("#checkout-next").addClass("no-click")})),$(".checkout-wrapper").length){var e=parseInt($(".checkout-wrapper").attr("data-checkout-step")),t=JSON.parse(localStorage.getItem("checkout")),a=JSON.parse(localStorage.getItem("user"));if(disableCartSidebar(),a.isLoggedIn){if(null==t)setTimeout((function(){$(".checkout-blocked-modal").addClass("is-active"),setTimeout((function(){$(".checkout-blocked-modal .box").addClass("scaled")}),600)}),1500);else if(t.step!==e&&(window.location.href="/checkout-step".concat(t.step,".html")),$("#checkout-1").length)getCheckoutSidebar(),getCheckoutStep1();else if($("#checkout-2").length)getCheckoutSidebar(),getCheckoutStep2();else if($("#checkout-3").length)getCheckoutSidebar();else if($("#checkout-4").length)getCheckoutSidebar(),getCheckoutStep1(),getCheckoutStep4();else if($("#checkout-5").length){getCheckoutSidebar();var s=JSON.parse(localStorage.getItem("cart"));s.products=[],s.items=0,s.total=0,localStorage.setItem("cart",JSON.stringify(s)),setTimeout((function(){$(".success-card").removeClass("is-hidden"),getCart()}),2e3)}}else setTimeout((function(){$(".checkout-unauth-modal").addClass("is-active"),setTimeout((function(){$(".checkout-unauth-modal .box").addClass("scaled")}),600)}),1500)}if($("#checkout-next").on("click",(function(){var e=JSON.parse(localStorage.getItem("checkout")),t=$(this);if(t.addClass("is-loading"),$("#checkout-1").length)e.step=parseInt(e.step)+1,localStorage.setItem("checkout",JSON.stringify(e)),setTimeout((function(){window.location.href="/checkout-step2.html",t.removeClass("is-loading")}),1e3);else if($("#checkout-2").length){var a={};0===$(".method-card.is-selected").length?(toasts.service.error("","fa fa-close","Please select a shipping method","bottomRight",2500),setTimeout((function(){t.removeClass("is-loading")}),1e3)):(e.step=parseInt(e.step)+1,localStorage.setItem("checkout",JSON.stringify(e)),a.icon=$(".method-card.is-selected").find("img").attr("src"),a.name=$(".method-card.is-selected").find("h3").text(),a.description=$(".method-card.is-selected").find("p").text(),e.shippingMethod=a,e.shipping=parseFloat($("#checkout-shipping-value").text()).toFixed(2),e.total=(parseFloat(e.total)+parseFloat(e.shipping)).toFixed(2),localStorage.setItem("checkout",JSON.stringify(e)),setTimeout((function(){window.location.href="/checkout-step3.html",t.removeClass("is-loading")}),1e3))}else if($("#checkout-3").length){var s={};0===$(".method-card.is-selected").length?(toasts.service.error("","fa fa-close","Please select a payment method","bottomRight",2500),setTimeout((function(){t.removeClass("is-loading")}),1e3)):(e.step=parseInt(e.step)+1,localStorage.setItem("checkout",JSON.stringify(e)),s.icon=$(".method-card.is-selected").find("img").attr("src"),s.name=$(".method-card.is-selected").find("h3").text(),s.description=$(".method-card.is-selected").find("p").text(),e.paymentMethod=s,localStorage.setItem("checkout",JSON.stringify(e)),setTimeout((function(){window.location.href="/checkout-step4.html",t.removeClass("is-loading")}),1e3))}else if($("#checkout-4").length){o.step=parseInt(o.step)+1,localStorage.setItem("checkout",JSON.stringify(o));var o=JSON.parse(localStorage.getItem("checkout")),i=$("#checkout-notes").val();o.orderNotes=i,localStorage.setItem("checkout",JSON.stringify(o)),setTimeout((function(){window.location.href="/checkout-step5.html",t.removeClass("is-loading")}),1e3)}})),$(".checkout-back").on("click",(function(e){var t=JSON.parse(localStorage.getItem("checkout")),a=$(this);a.addClass("is-loading"),void 0!==a.attr("data-checkout-step")&&(e.preventDefault(),t.step=parseInt(t.step)-1,localStorage.setItem("checkout",JSON.stringify(t)),$("#checkout-2").length?setTimeout((function(){window.location.href="/checkout-step1.html",a.removeClass("is-loading")}),1e3):$("#checkout-3").length?(t.total=(parseFloat(t.total)-parseFloat(t.shipping)).toFixed(2),t.shipping=(0).toFixed(2),localStorage.setItem("checkout",JSON.stringify(t)),setTimeout((function(){window.location.href="/checkout-step2.html",a.removeClass("is-loading")}),1e3)):$("#checkout-4").length&&setTimeout((function(){window.location.href="/checkout-step3.html",a.removeClass("is-loading")}),1e3))})),$("#end-checkout-button").on("click",(function(){$(this).addClass("is-loading"),convertCheckoutToOrder(),setTimeout((function(){window.location.href="/orders.html"}),1200)})),$("#credit-card").length)new Card({form:".active form",container:".card-wrapper"});$(".action-bar").length&&(window.matchMedia("(max-width: 768px)").matches?($(".action-bar").addClass("is-mobile"),$(".shop-wrapper").addClass("is-mobile-mode"),$(".main-sidebar, .shop-quickview, .cart-quickview, .filters-quickview").addClass("is-pushed-mobile"),$(".pageloader, .infraloader").addClass("is-full")):($(".shop-wrapper").removeClass("is-mobile-mode"),$(".main-sidebar, .shop-quickview, .cart-quickview, .filters-quickview").removeClass("is-pushed-mobile"),$(".pageloader, .infraloader").removeClass("is-full")),$(window).on("resize",(function(){window.matchMedia("(max-width: 768px)").matches?($(".action-bar").addClass("is-mobile"),$(".shop-wrapper").addClass("is-mobile-mode"),$(".main-sidebar, .shop-quickview, .cart-quickview, .filters-quickview").addClass("is-pushed-mobile"),$(".pageloader, .infraloader").addClass("is-full")):($(".shop-wrapper").removeClass("is-mobile-mode"),$(".main-sidebar, .shop-quickview, .cart-quickview, .filters-quickview").removeClass("is-pushed-mobile"),$(".pageloader, .infraloader").removeClass("is-full"))})))}));