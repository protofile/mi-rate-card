"use strict";var productId=parseInt($.urlParam("productId"));function initProductSpinner(){$(".details-spinner").spinner("changing",(function(t,e,a){$(this).closest(".product-quantity").find(".spinner-value").html(e)}))}function getRelatedProducts(){$(".featured-product").each((function(){var t=$(this),e=parseInt(t.attr("data-product-id"));$.ajax({url:"assets/data/products.json",async:!0,dataType:"json",success:function(a){for(var i=0;i<a.length;i++)a[i].id===e&&(t.closest(".product-container").attr("data-product-id",a[i].id),t.find("img").attr("src",a[i].pic),t.find("img").attr("data-demo-src",a[i].pic),t.find(".product-name").html(a[i].name),t.find(".product-description").html(a[i].tagline))}})}))}function getProductPage(t){$.ajax({url:"assets/data/products.json",async:!0,dataType:"json",success:function(e){for(var a=0;a<e.length;a++)if(e[a].id===t){$(".product-container").attr("data-product-id",e[a].id),$("#details-add-to-cart").attr("data-product-id",e[a].id),$("#product-category").html(e[a].category),$(".category-icon").addClass("is-hidden"),$("#product-details-name, #panel-product-name").html(e[a].name),$("#product-details-shortDesc").html(e[a].shortDesc),$("#product-details-sku, #panel-product-sku").html(e[a].sku),$("#"+e[a].category.toLowerCase().split(" ").join("")+"-icon").removeClass("is-hidden"),!0===e[a].discounted?($("#new-price").html(e[a].price.toFixed(2)),$("#old-price").removeClass("is-hidden").html(e[a].oldPrice.toFixed(2))):($("#old-price").addClass("is-hidden"),$("#new-price").html(e[a].price.toFixed(2))),e[a].inventoryQty>0?$("#panel-product-availability").html("Available"):$("#panel-product-availability").html("Sold Out"),$("#panel-product-vendor").html(e[a].vendor),$("#panel-product-dimensions").html(e[a].dimensions),$("#panel-product-weight").html(e[a].weight),$("#panel-product-shipping-delay").html(e[a].shippingTime),$("#related-product-0").attr("data-product-id",e[a].related[0].id),$("#related-product-1").attr("data-product-id",e[a].related[1].id),$("#related-product-2").attr("data-product-id",e[a].related[2].id),$("#product-view .is-carousel").empty();for(var i=0;i<e[a].images.length;i++){var d='\n                            <div>\n                                <img src="http://via.placeholder.com/500x500/ffffff/999999" data-demo-src="'.concat(e[a].images[i].url,'" data-action="zoom" alt="">\n                            </div>\n                        ');$.when($("#product-view .is-carousel").append(d)).done((function(){initProductCarousel(),initProductSpinner(),getRelatedProducts(),"development"===env&&changeDemoImages()}))}}}})}function addToCartDetails(t){var e=JSON.parse(localStorage.getItem("cart")),a=(t.closest(".product-container"),parseInt(t.attr("data-product-id"))),i=$("#product-details-name").text(),d=$("#product-category").text(),s=parseFloat($("#new-price").text()),o=$(".is-carousel > div:first-child img").attr("src"),r=parseInt($(".details-spinner input").val());if(e.products.some((function(t){return t.id===a}))){console.log("Product exists in cart");for(var c=0;c<e.products.length;c++)parseInt(e.products[c].id)===a&&(e.products[c].quantity=parseInt(e.products[c].quantity+r),localStorage.setItem("cart",JSON.stringify(e)))}else console.log("Product does not exist in cart"),e.items=e.items+1,e.products.push({id:a,name:i,quantity:r,category:d,price:s,images:[{url:o}]}),localStorage.setItem("cart",JSON.stringify(e))}function initProductPageUI(){$(".product-action").on("click",(function(){$(".product-action.is-active").removeClass("is-active"),$(this).addClass("is-active")})),$("#show-product").on("click",(function(){$("#meta-view, #ratings-view").addClass("is-hidden"),$("#product-view").removeClass("is-hidden")})),$("#show-meta").on("click",(function(){$("#product-view, #ratings-view").addClass("is-hidden"),$("#meta-view").removeClass("is-hidden")})),$("#show-ratings").on("click",(function(){$("#meta-view, #product-view").addClass("is-hidden"),$("#ratings-view").removeClass("is-hidden")}))}$((function(){$("#product-page").length&&(initProductPageUI(),getProductPage(productId),$("#details-add-to-cart").on("click",(function(){var t=$(this);t.addClass("is-loading"),$(".cart-quickview").hasClass("is-active")&&$(".cart-loader").addClass("is-active"),setTimeout((function(){$.when(addToCartDetails(t)).done((function(){getCart()}))}),300),setTimeout((function(){$(".cart-quickview").hasClass("is-active")&&$(".cart-loader").removeClass("is-active"),toasts.service.success("","fas fa-plus","Product successfully added to cart","bottomRight",2500),t.removeClass("is-loading")}),800)})),$("#sidebar-wishlist-button").removeClass("is-hidden"))}));